<div class="ui-sortable-handle widget-container-col">
    <h5 class="title-size">
        <i class="ace-icon fa fa-medkit"></i>其它支出
        <a href="javascript:void(0)" class="T-otherOut-add">
            <button class="btn btn-sm btn-success T-add" style="margin-left: 20px">
                <i class="ace-icon fa fa-plus"></i>
                新增
            </button>
        </a>
    </h5>
</div>
<div class="overflow-x min-w-1050">
<table class="table table-striped table-bordered table-hover w-1500">
    <thead>

    <tr>
        <th class="th-border" rowspan="2"><span class="necessary">*</span>时间</th>
        <th class="th-border" rowspan="2"><span class="necessary">*</span>项目</th>
        <th class="th-border" rowspan="2"><span class="necessary">*</span>单价</th>
        <th class="th-border" rowspan="2"><span class="necessary">*</span>数量</th>
        <th class="th-border" rowspan="2">优惠</th>
        <th class="th-border" rowspan="2">应付</th>
        <th class="th-border" rowspan="2">已付</th>
        <th class="th-border" colspan="6">导游实销</th>
        <th class="th-border" rowspan="2">操作</th>
    </tr>
    <tr>
        <th class="th-border">导游</th>
        <th class="th-border">数量</th>
        <th class="th-border">付款方式</th>
        <th class="th-border">金额</th>
        <th class="th-border">单据</th>
        <th class="th-border">备注</th>   
    </tr>
    </thead>
    <tbody class="T-count-otherOut"> 
    {{if otherArrange != null}}
        {{if otherArrange.listMap.length}}
            {{each otherArrange.listMap as arrange index}}
                {{if arrange != null}}
                    <tr otherArrangeId="{{arrange.id}}" badStatus = "{{arrange.badStatus}}" whichDay="{{arrange.whichDay}}" 
                    isConfirmAccount="{{arrange.isConfirmAccount}}">
                        <td >
                            <span class="whichDay">{{arrange.dateTime | dateFormat: 'yyyy-MM-dd'}}</span>
                        </td>

                        <td>
                            <span class="otherName">{{arrange.otherName}}</span>
                        </td>

                        <td>
                            {{if tripPlan.billStatus == -1}}
                                {{if arrange.badStatus == 1}}
                                    <span class="F-float F-money">{{arrange.realPrice}}</span>
                                {{else}} 
                                    <span class="price F-float F-money">{{arrange.realPrice}}</span>
                                {{/if}}
                                    <input type="hidden" name="price" value="{{arrange.realPrice}}"/>
                            {{else}}
                                {{if arrange.badStatus == 1}}
                                    <input type="text" name="price" value="{{arrange.realPrice}}"readOnly="readOnly" class="w-80" />
                                {{else}}
                                    <input type="text" name="price" class="w-80" value="{{arrange.realPrice}}" 
                                           {{if arrange.isConfirmAccount == 1}}readOnly="readOnly"{{/if}}/>
                                {{/if}}
                            {{/if}}
                        </td>

                        <td>
                        {{if arrange.badStatus == 1}}
                            <span class="F-float F-count">{{arrange.memberCount}}</span>
                        {{else}}  
                            <input  type="text" class="F-float F-count w-50" name="realCount" value="{{arrange.realCount}}" maxlength="5" 
                            {{if arrange.isConfirmAccount == 1}}readOnly="readOnly"{{/if}}/>
                        {{/if}}
                       </td>

                        <td>{{if arrange.badStatus == 1}}<span class="F-float F-money">{{arrange.realReduceMoney}}</span>{{else}}<input type="text" name="realReduceMoney" class="F-float F-money w-80" value="{{arrange.realReduceMoney}}" {{if arrange.isConfirmAccount == 1}}readOnly="readOnly"{{/if}}/>{{/if}}
                        </td>

                        <td>
                            <span class="otherOutNeedPayMoney F-float F-money">{{arrange.realNeedPayMoney}}</span>
                            <input type="hidden" name="needPayMoney" value="{{arrange.realNeedPayMoney}}">
                        </td>

                        <td><span class="F-float F-money">{{arrange.payedMoney}}</span></td>

                        <td name="guideName">
                            <div class="div-h-30">
                                <button class="btn btn-success btn-sm btn-white T-addGuide pull-right"> 
                                    <i class="ace-icon fa fa-plus bigger-110 icon-only"></i>
                                </button>
                                <!-- <a href="#" class="T-addGuide pull-right">增加</a> --><!-- 增加导游 -->
                            </div>
                            {{if !!arrange.guideDetails && arrange.guideDetails.length}}
                                {{each arrange.guideDetails as rs index}}
                                    <div class="div-h-30 mar-t-5" index="{{index+1}}" guideId = "{{rs.id}}">
                                        <span class="guideName">{{rs.guideName}}</span>
                                        <input name="guideId" value="{{rs.id}}" type="hidden" />
                                        <input name="guideName" value="{{rs.guideName}}" type="hidden" />
                                        <input name="guideArrangeId" value="{{rs.guideArrangeId}}" type="hidden" />
                                        <button class="btn btn-danger btn-sm btn-white T-delGuide pull-right"> 
                                            <i class="ace-icon fa fa-minus bigger-110 icon-only"></i>
                                        </button>
                                        <!-- 删除导游 -->
                                    </div>
                                {{/each}}
                                {{else}}
                                    <div class="div-h-30 mar-t-5" index="1">
                                        <input name="guideId" type="hidden" />
                                        <input name="guideName"  type="text" class="w-80" {{if arrange.isConfirmAccount==1 }}readOnly="readOnly" {{/if}}{{if arrange.isConfirmAccount==1 }}readOnly="readOnly" {{/if}}/>
                                        <button class="btn btn-danger btn-sm btn-white T-delGuide pull-right"> 
                                            <i class="ace-icon fa fa-minus bigger-110 icon-only"></i>
                                        </button>
                                        <!-- <a href="#" class="T-delGuide pull-right">删除</a> -->
                                        <!-- 删除导游 -->
                                    </div>
                            {{/if}}
                            
                        </td><!-- 导游 -->

                        <td name="guideRealCount">
                            <div class="div-h-30"></div>
                            {{if !!arrange.guideDetails && arrange.guideDetails.length}}
                                {{each arrange.guideDetails as rs index}}
                                    <div class="div-h-30 mar-t-5" index="{{index+1}}">
                                        <input name="guideRealCount" value="{{rs.realCount}}" class="w-50" 
                                        {{if arrange.isConfirmAccount==1 }}readOnly="readOnly" {{/if}}/>
                                    </div>
                                {{/each}}
                                {{else}}
                                <div class="div-h-30 mar-t-5" index="1">
                                    <input name="guideRealCount" class="w-50" {{if arrange.isConfirmAccount==1 }}readOnly="readOnly" {{/if}}/>
                                </div>
                            {{/if}}
                        </td><!-- 数量 -->
                        
                        <td name="payType">
                            <div class="div-h-30"></div>
                            {{if !!arrange.guideDetails && arrange.guideDetails.length}}
                                {{each arrange.guideDetails as rs index}}
                                    <div class="div-h-30 mar-t-5" index="{{index+1}}">
                                        <select name="payType" {{if arrange.isConfirmAccount == 1}}disabled="disabled"{{/if}}>
                                            <option value="0" {{if arrange.realPayType == 0}}selected="selected"{{/if}}>现金</option>
                                            <option value="1" {{if arrange.realPayType == 1}}selected="selected"{{/if}}>刷卡</option>
                                            <option value="2" {{if arrange.realPayType == 2}}selected="selected"{{/if}}>签单</option>
                                        </select>
                                    </div>
                                {{/each}}
                            {{else}}
                                <div class="div-h-30 mar-t-5" index="1" {{if arrange.isConfirmAccount == 1}}disabled="disabled"{{/if}}>
                                    <select name="payType">
                                            <option value="0" >现金</option>
                                            <option value="1" >刷卡</option>
                                            <option value="2" >签单</option>
                                    </select>
                                </div>
                            {{/if}}
                        </td><!-- 付款方式 -->
                        
                        <td name="guidePayedMoney">
                            <div class="div-h-30"></div>
                            {{if !!arrange.guideDetails && arrange.guideDetails.length}}
                                {{each arrange.guideDetails as rs index}}
                                    <div class="div-h-30 mar-t-5" index="{{index+1}}">
                                        <input name="guidePayedMoney" value="{{rs.guidePayedMoney}}" class="w-80" 
                                        {{if arrange.isConfirmAccount==1 }}readOnly="readOnly" {{/if}}/>
                                    </div>
                                {{/each}}
                            {{else}}
                                <div class="div-h-30 mar-t-5" index="1">
                                    <input name="guidePayedMoney" class="w-80" {{if arrange.isConfirmAccount==1 }}readOnly="readOnly" {{/if}}/>
                                </div>
                            {{/if}}
                        </td><!-- 金额 -->
                        
                        <td name="billImage">
                            <div class="div-h-30"></div>
                            {{if !!arrange.guideDetails && arrange.guideDetails.length}}
                                {{each arrange.guideDetails as rs index}}
                                    <div class="div-h-30 mar-t-5" index="{{index+1}}">
                                       {{if rs.billImage != null && rs.billImage != ""}}
                                        <a href="javascript:void(0);" url="{{rs.billImage}}" class="btn-view">查看</a>
                                    {{else}}
                                        <span style="color:#bbb;">查看</span>
                                    {{/if}}
                                    </div>
                                {{/each}}
                            {{else}}
                                <div class="div-h-30 mar-t-5" index="1">
                                    <span style="color:#bbb;">查看</span>
                                </div>
                            {{/if}}
                        </td><!-- 单据 -->
                        
                        <td name="billRemark">
                            <div class="div-h-30"></div>
                            {{if !!arrange.guideDetails && arrange.guideDetails.length}}
                                {{each arrange.guideDetails as rs index}}
                                    <div class="div-h-30 mar-t-5" index="{{index+1}}">
                                        <input name="billRemark" value="{{rs.billRemark}}"
                                        {{if arrange.isConfirmAccount==1 }}readOnly="readOnly" {{/if}}/>
                                    </div>
                                {{/each}}
                            {{else}}
                                <div class="div-h-30 mar-t-5" index="1">
                                    <input name="billRemark" {{if arrange.isConfirmAccount==1 }}readOnly="readOnly" {{/if}}/>
                                </div>
                            {{/if}}
                        </td><!-- 备注 -->

                        <td>
                            {{if arrange.isConfirmAccount == 0}}
                                未对账
                            {{else}}
                                已对账
                            {{/if}}
                            &nbsp;&nbsp;
                            {{if arrange.payedMoney == 0 &&　arrange.isConfirmAccount == 0}}
                                <a href="javascript:void(0)" class="T-otherOutArrDel">删除</a>
                            {{else}}
                                <span style="color:#bbb;">删除</span>
                            {{/if}}
                        </td>
                    </tr>
                {{/if}}
            {{/each}}
        {{/if}}
        {{else}}
        <tr><td colspan="14">暂无记录！</td></tr>
    {{/if}}
    </tbody>
</table>
</div>
{{if tripPlan.billStatus > -1}}
    <div style="width:60%;">
        <div> 
            <label style="margin:5px 0px 0px 0px;">财务审核批注：</label>
            <input name="accountFinancialCheckComment" {{if (!(tripPlan.billStatus == 1 && isFinance)) }}readonly="readonly"{{/if}} type="text" style="width:30%;" value="{{if remarkArrangeList.otherOutRemark.length>0}}{{remarkArrangeList.otherOutRemark[0].opCheckRemark}}{{/if}}" />
        
            <label style="margin:5px 0px 0px 10px;">计调审核批注：</label>
            <input name="accountOPCheckComment" {{if (!(tripPlan.billStatus == 0 && isOp)) }}readonly="readonly"{{/if}} type="text" style="width:30%;" value="{{if remarkArrangeList.otherOutRemark.length>0}}{{remarkArrangeList.otherOutRemark[0].financeCheckRemark}}{{/if}}" />
        </div>
    </div>
{{/if}}