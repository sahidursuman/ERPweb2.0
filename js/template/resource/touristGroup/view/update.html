<div class="group-info-area">
	<h5>
		<span class="badge badge-primary">1</span>
		<label class="middle title-size">小组信息</label>
	</h5>
</div>
<form class="group-info globalAdd T-touristGroupMainForm"  onsubmit="return false">
	<div class="form-inline">
		<div class="form-group fixed-width">
		    <label for="qouteNumber">报价单号：</label>
            <input type="text" id="qouteNumber" name="quoteNumber" value="{{if !!touristGroupDetail.quote}}{{touristGroupDetail.quote.quoteNumber}}{{/if}}" class="form-control bind-change T-quoteNumber" readonly="readonly" />
            <input type="hidden" name="quoteNumberId" class="T-quoteNumberId" />
	        <button class="search-btn btn-sm T-ChosenQuoteNumber" onsubmit="return false">
	                <i class="ace-icon fa fa-search "></i>搜索
	        </button>
		</div>

		<div class="form-group fixed-width">
		    <label for="qouteNumber"><span class="necessary">*</span> 线路产品：</label>
	        <input type="text" name="lineProductIdName" class="form-control bind-change T-lineProductIdName" readonly="readonly" value="{{if touristGroupDetail.lineProduct != null}}{{touristGroupDetail.lineProduct.name}}{{/if}}"/>
	        <input type="hidden" name="lineProductId" class="T-lineProductId"value="{{touristGroupDetail.lineProductId}}" />
	        <input type="hidden" name="quoteId" class="T-quoteId" value="{{touristGroupDetail.quoteId}}"/>
	        {{if touristGroupDetail.status == 1}}
	    	<button class="search-btn btn-sm T-travelLine-search" onsubmit="return false">
	        	<i class="ace-icon fa fa-search "></i>搜索
        	</button>
        	{{/if}}
		</div>

		<div class="form-group fixed-width-1" style="text-align:left;">
			<label><span class="necessary">*</span>人数：</label>
            大人
            <label><span class="necessary">*</span>   
			<input type="text" name="adultCount" value="{{touristGroupDetail.adultCount}}" class="form-control T-adultCount" style="width:35px" />
            小孩
            <input type="text" name="childCount" value="{{touristGroupDetail.childCount}}" class="form-control T-childCount"  style="width:35px"/>
		</div>

		<div class="form-group">
			<label>针对客源： </label>
            <select name="customerType" style="width:133px;">
                <option{{if touristGroupDetail.customerType == 0}} selected="selected"{{/if}} value="0">散客</option>
                <option{{if touristGroupDetail.customerType == 1}} selected="selected"{{/if}} value="1">团体</option>
            </select>
		</div>
	</div>

    <div class="form-inline">
    	<div class="form-group fixed-width">
    		<label><span class="necessary">*</span>出游日期：</label>
            <input type="text" name="startTime" class="form-control date-picker datepicker T-startTime" value="{{touristGroupDetail.startTime | dateFormat: 'yyyy-MM-dd'}}" {{if !!touristGroupDetail.quoteId}} disabled {{/if}} {{if touristGroupDetail.status != 1}}readonly="readonly"{{/if}} />
    	</div>

        <div class="form-group fixed-width">
            <label><span class="necessary">*</span>完团日期：</label>
            <input type="text" name="endTime" class="form-control date-picker datepicker T-endTime"  value="{{touristGroupDetail.endTime  | dateFormat: 'yyyy-MM-dd'}}" />
        </div>

     	<div class="form-group">
    		<label><span class="necessary">*</span>客户：</label>
            <input type="text" name="fromPartnerAgency" class="form-control bind-change T-fromPartnerAgencyName" placeholder="请输入客户来源" style="width:133px;" value="{{if touristGroupDetail.partnerAgency != null}}{{touristGroupDetail.partnerAgency.travelAgencyName}}{{/if}}" {{if !!touristGroupDetail.quoteId || !!type }} readonly {{/if}}>
			<input type="hidden" name="fromPartnerAgencyId" class="T-fromPartnerAgencyId" value="{{if touristGroupDetail.partnerAgency != null}}{{touristGroupDetail.partnerAgency.id}}{{/if}}">
			<input type="hidden" name="type" value="">
			</label>
			<span class="{{if type==null}}T-addPartner{{/if}} R-right {{if !!touristGroupDetail.quoteId}} hidden {{/if}}" data-right="1150002" style="display: inline-block;left:0" title="添加客户">
				<i class="ace-icon fa fa-plus bigger-110 icon-only" ></i>
			</span>
    	</div>

    	<div class="form-group">
    		<label><span class="necessary">*</span>客户联系人：</label>
            <input class="form-control bind-change T-partnerAgencyNameList" name="partnerAgencyNameList" type="text"  style="width:133px;"value="{{if touristGroupDetail.partnerAgencyContact != null}}{{touristGroupDetail.partnerAgencyContact.contactRealname}} -[{{touristGroupDetail.partnerAgencyContact.contactMobileNumber}}]{{/if}}" name="partnerAgencyNameList" type="text" />
			<input type="hidden" name="partnerAgencyContactId" value="{{if touristGroupDetail.partnerAgencyContact != null}}{{touristGroupDetail.partnerAgencyContact.id}}{{/if}}" class="T-partnerAgencyContactId" />

			<span class="T-addPartnerManager {{if !!touristGroupDetail.quoteId}} hidden {{/if}}" style="cursor:pointer;" title="为客户来源添加联系人">
				<i class="ace-icon fa fa-plus bigger-110 icon-only"></i>
			</span>
    	</div>
	</div>

	<div class="form-inline">
        <div class="form-group fixed-width">
            <label >全陪：</label>
            <input type="text" name="accompanyGuideName" value="{{touristGroupDetail.accompanyGuideName}}" maxlength="100"> 
        </div>

        <div class="form-group fixed-width">
            <label class="control-label no-padding-right" >全陪电话：</label>
            <input type="text" name="accompanyGuideMobile"  value="{{touristGroupDetail.accompanyGuideMobile}}" maxlength="11">
        </div>

        <div class="form-group fixed-width-1">
    		<label>获得方式： </label>
    		<select name="getType" style="width:133px;">
    			<option{{if touristGroupDetail.getType == 1}} selected="selected"{{/if}} value="1">旅行社系统</option>
    			<option{{if touristGroupDetail.getType == 2}} selected="selected"{{/if}} value="2">传真</option>
    			<option{{if touristGroupDetail.getType == 3}} selected="selected"{{/if}} value="3">短信</option>
    			<option{{if touristGroupDetail.getType == 4}} selected="selected"{{/if}} value="4">电话</option>
    			<option{{if touristGroupDetail.getType == 5}} selected="selected"{{/if}} value="5">QQ</option>
    		</select>
    	</div>
        <div class="form-group fixed-width-1">   
            <label>组团单号：
    		    <input type="text" name="otaOrderNumber" class="form-control" maxlength="100" value="{{touristGroupDetail.otaOrderNumber}}" />
    		</label>
        </div>
    </div>

    <div class="form-inline">
        <div class="form-group fixed-width">
            <label>外联销售：</label>
            <input type="text" name="realName" value="{{if !!touristGroupDetail.outOPUser}}{{touristGroupDetail.outOPUser.realName}}{{/if}}" class="T-choose-opUserList">
            <input type="hidden" name="outOPUserId" value="{{if !!touristGroupDetail.outOPUser}}{{touristGroupDetail.outOPUser.id}}{{/if}}">
        </div>

        <div class="form-group fixed-width-1">
            <label>客源类型： </label>
            <select name="memberType" style="width:133px;">
                <option{{if touristGroupDetail.memberType == 0}} selected="selected"{{/if}} value="0">内宾</option>
                <option{{if touristGroupDetail.memberType == 1}} selected="selected"{{/if}} value="1">外宾</option>
            </select>
        </div>
    
        <div class="form-group fixed-width-1">
            <label>接站牌：</label>
            <input type="text" name="welcomeBoard" value="{{touristGroupDetail.welcomeBoard}}" maxlength="20" >
        </div>

        <div class="form-group">
			<label class="control-label no-padding-right">是否购买保险：
			    <input type="checkbox" class="ace buyInsurance-status" value="1" name="buyInsurance"  {{if touristGroupDetail.buyInsurance==1}}checked="checked"{{/if}}/>
			    <span class="lbl"></span>
			</label>
		</div>

         <div class="form-group fixed-width-1">
            <label>收客单号：</label>
            <input type="text" name="orderNumber" value="{{touristGroupDetail.orderNumber}}"  maxlength="9" placeholder="系统自动生成" >  
        </div>
    </div>

    <div class="form-group clearfix">
        <label class="pull-left control-label no-padding-right" style="margin-left:42px;">备注:</label>
        <div class="col-sm-10">
         <textarea class="form-control col-sm-12" name="remark" value="{{touristGroupDetail.remark}}"  maxlength="1000">{{touristGroupDetail.remark}}</textarea>
        </div>
    </div>

   
	<div class="group-info-area">
		<h5>
			<span class="badge badge-primary">2</span>
			<label class="middle title-size">账单</label>
		</h5>
	</div>

	<div class="form-inline">
    	<div class="form-group fixed-width-1">
    		<label>应收：</label>
    		<input readonly="readonly" type="text" name="needPayAllMoney" maxlength="9" value="{{touristGroupDetail.needPayAllMoney}}"> 
		    
    	</div>
    	<div class="form-group fixed-width-1">
    		<label class="control-label no-padding-right">预收款：</label>
    	    <input type="text" name="preIncomeMoney" maxlength="9" value="{{touristGroupDetail.preIncomeMoney}}">
    	</div>

    	<div class="form-group fixed-width-1">
    		<label>计划现收：</label>
    		<input type="text" name="currentNeedPayMoney" maxlength="9" value="{{touristGroupDetail.currentNeedPayMoney}}" {{if touristGroupDetail.isReceived == 1 }}readonly="readonly"{{/if}} >
    	</div>
    </div>

    <div class="form-inline col-sm-12">
        <button class="btn pull-left btn-sm btn-success T-touristGroup-addOtherCost">
            <i class="ace-icon fa fa-plus"></i> 新增费用项
        </button>
    </div>
    <div class="form-inline">
        <div class="col-sm-10 tourist-contenWidth" style="margin: auto;">
            <table class="table table-striped table-bordered table-hover addCostList">
                <thead>
                    <tr>
                        <th class="th-border">费用项</th>
                        <th class="th-border">数量</th>  
                        <th class="th-border">单价</th>
                        <th class="th-border">金额</th>
                        <th class="th-border">说明</th>
                        <th class="th-border">操作</th>
                    </tr>
                </thead>
                <tbody class="T-addCostTbody">
                    {{each touristGroupDetail.touristGroupFeeList as feeList}}
					<tr data-entity-id="{{feeList.id}}">
						<td>
							<input name="describeInfo" value="{{feeList.describeInfo}}" type="text" class="col-sm-10 col-sm-offset-1  no-padding-right" />
						</td>
						<td>
							<input name="count" value="{{feeList.count}}" type="text" class="col-sm-10 col-sm-offset-1 no-padding-right T-costCount T-count T-calc" />
						</td>

						<td>
							<input name="price" value="{{feeList.price}}" type="text" class="col-sm-10 col-sm-offset-1 no-padding-right T-costPrice T-price T-calc" />
						</td>

						<td>
                        	<input name="" value="" readonly="readonly" type="text" class="col-sm-10 col-sm-offset-1 no-padding-right T-payMoney" />
                        </td>
                       <td>
							<input name="remark" value="{{feeList.remark}}" type="text" class="col-sm-10  col-sm-offset-1 no-padding-right" />
						</td>
						
						<td><a class="cursor T-delete">删除</a></td>
					</tr>
					{{/each}}
                </tbody>
            </table>
        </div>
    </div>
</form>

<div class="col-xs-12 updateTouristGroup globalAdd">
	<form class="form-horizontal touristGroupMainFormMember T-touristGroupMainFormMember" role="form" style="margin-top:10px" onsubmit="return false">
		<div class="form-group">
			<div class="col-sm-8 col-sm-12 widget-container-col">
				<div class=" ui-sortable-handle">
					<h5 class="">
						<span class="badge badge-primary">3</span>
						<label class="middle title-size">游客名单</label>
					</h5>
					<div class="widget-body">
						<div class="widget-main">
							<div class="form-group"> 
								<label class="col-sm-1 control-label no-padding-right">住宿标准：</label>
								<div class="col-sm-2">
									<select name="level" class="col-sm-12"  {{if !!type}}disabled="disabled"{{/if}}>
										<option{{if touristGroupDetail.hotelLevel == 0}} selected="selected"{{/if}} value="0">未选择</option>
										<option{{if touristGroupDetail.hotelLevel == 1}} selected="selected"{{/if}} value="1">三星以下</option>
										<option{{if touristGroupDetail.hotelLevel == 2}} selected="selected"{{/if}} value="2">三星</option>
										<option{{if touristGroupDetail.hotelLevel == 3}} selected="selected"{{/if}} value="3">准四星</option>
										<option{{if touristGroupDetail.hotelLevel == 4}} selected="selected"{{/if}} value="4">四星</option>
										<option{{if touristGroupDetail.hotelLevel == 5}} selected="selected"{{/if}} value="5">准五星</option>
										<option{{if touristGroupDetail.hotelLevel == 6}} selected="selected"{{/if}} value="6">五星</option>
										<option{{if touristGroupDetail.hotelLevel == 7}} selected="selected"{{/if}} value="7">五星以上</option>
									</select>
								</div>
								<label class="col-sm-2 control-label no-padding-right">包含自费：</label>
								<div class="col-sm-7">
									<input name="includeOwnExpense" value="{{touristGroupDetail.includeSelfPay}}" type="text" {{if !!type}}readonly="readonly"{{/if}} class="col-sm-12" maxlength="1000" />
								</div>
							</div>
							
							<div class="form-group margin-top15">
								<div class="col-sm-8">
									<button class="btn btn-sm btn-success T-add-tourist" style="float:left;">
										<i class="ace-icon fa fa-plus"></i>
										添加成员
									</button>
									<div style="height:5px;width:25px;float:left;"></div>
									<button class="btn btn-sm btn-success T-add-tourist-more" style="float:left;">
										<i class="ace-icon fa fa-plus"></i>
										批量添加
									</button>
								</div>
								<div class="form-group">
									<div class="col-sm-12  tourist-contenWidth">
										<table class="table table-striped table-bordered table-hover T-addTouristList margin-top">
											<thead>
											<tr>
												<th class="th-border">序号</th>
												<th class="th-border"> <span class="necessary">*</span>姓名</th>
												<th class="th-border"> <span class="necessary">*</span>手机号码</th>
												<th class="th-border">证件类型</th>
												<th class="th-border">证件号</th>
												<th class="th-border">设为联系人</th>
												<th class="th-border">操作</th>
											</tr>
											</thead>
											<tbody class="T-addTouristTbody">{{each touristGroupDetail.touristGroupMemberList as memberList}}
											<tr data-entity-id="{{memberList.id}}">
												<td></td>
												<td>
													<input name="name" value="{{memberList.name}}" type="text" class="col-sm-12  no-padding-right" />
												</td>
												<td>
													<input name="mobileNumber" value="{{memberList.mobileNumber}}" type="text" class="col-sm-12  no-padding-right T-mobileNumber" maxlength="11" />
												</td>
												<td>
													<select name="idCardType">
														<option value="0" {{if memberList.idCardType == 0}}selected="selected"{{/if}}>身份证</option>
														<option value="1" {{if memberList.idCardType == 1}}selected="selected"{{/if}}>护照</option>
														<option value="2" {{if memberList.idCardType == 2}}selected="selected"{{/if}}>其它</option>
													</select>
												</td>
												<td>
													<input name="idCardNumber" value="{{memberList.idCardNumber}}" type="text" class="col-sm-12  no-padding-right" />
												</td>
												<td>
													<div class="checkbox">
														<label>
															<input type="checkbox" {{if  memberList.isContactUser==1}}checked="checked"{{/if}} class="ace " value="1" name="isContactUser">
															<span class="lbl">
															</span>
														</label>
													</div>
												</td>
												<td>
													<a class="cursor oldbtnDeleteTourist">
														删除
													</a>
												</td>
											</tr>{{/each}}
											</tbody>
										</table>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
	</form>
	<form class="form-horizontal touristGroupMainFormRS T-touristGroupMainFormRS" role="form" style="margin-top:10px" onsubmit="return false">
		<div class="form-group">
			<div class="col-xs-12 col-sm-12 widget-container-col">
				<div class=" ui-sortable-handle">
					<h5 class="">
						<span class="badge badge-primary">4</span>
						<label class="middle title-size">中转</label>
					</h5>
					<div class="widget-body">
						<div class="widget-main">
							<div class="form-group">
								<div class="col-sm-3">
									<label class="col-sm-2 control-label no-padding-right">接：</label>
									<div class="clo-sm-1 checkbox">
										<label>
											<input type="checkbox" class="ace reception-check T-touristReception" {{if touristGroupDetail.isNeedArriveService==1}}checked="checked"{{/if}} value="0" name="touristReception">
											<span class="lbl margin-topF5">

											</span>
										</label>
									</div>
									<div class="col-sm-12 T-reception-div hide" style="padding-top:25px;">
										<div class="form-group">
											<label class="col-sm-3 control-label no-padding-right">接待日期:</label>
											<div class="col-sm-9">
												<div class="input-group">
													<input type="text" value="{{if touristGroupDetail.isNeedArriveService==1}}{{if touristGroupDetail.outRemarkArrange != null}}{{touristGroupDetail.outRemarkArrange.arriveTime | dateFormat: 'yyyy-MM-dd'}}{{/if}}{{/if}}" name="receptionTime" class="col-sm-12 date-picker datepicker" />
													<span class="input-group-addon">
														<i class="fa fa-calendar"></i>
													</span>
												</div>
											</div>
										</div>
										<div class="form-group">
											<label class="col-sm-3 control-label no-padding-right">地点：</label>
											<div class="col-sm-9">
												<input name="receptionAddress" value="{{if touristGroupDetail.isNeedArriveService==1}}{{if touristGroupDetail.outRemarkArrange != null}}{{touristGroupDetail.outRemarkArrange.arrivePosition}}{{/if}}{{/if}}" type="text" class="col-sm-8" />
											</div>
										</div>
										<div class="form-group">
											<label class="col-sm-3 control-label no-padding-right">班次：</label>
											<div class="col-sm-9">
												<input name="arriveShift" type="text" class="col-sm-8" value="{{if touristGroupDetail.isNeedArriveService==1}}{{if touristGroupDetail.outRemarkArrange != null}}{{touristGroupDetail.outRemarkArrange.arriveShift}}{{/if}}{{/if}}" />
											</div>
										</div>
										<div class="form-group">
											<label class="col-sm-3 control-label no-padding-right">班次时间：</label>
											<div class="col-sm-9">

												<div class="input-group">
													<input type="text" value="{{if touristGroupDetail.isNeedArriveService==1}}{{if touristGroupDetail.outRemarkArrange != null}}{{touristGroupDetail.outRemarkArrange.arriveShiftTime}}{{/if}}{{/if}}" name="arriveShiftTime" class="col-sm-12 date-picker ShiftDatepicker" />
													<span class="input-group-addon">
														<i class="fa fa-calendar"></i>
													</span>
												</div>
											</div>
										</div>
									</div>
								</div>
								<div class="col-sm-3">
									<label class="col-sm-3 control-label no-padding-right">小车：</label>
									<div class="clo-sm-1 checkbox">
										<label>
											<input type="checkbox" {{if touristGroupDetail.isNeedBus==1}}checked="checked"{{/if}} class="ace smallCar T-smallCar" value="0" name="smallCar">
											<span class="lbl margin-topF5">

											</span>
										</label>
									</div>
								</div>

								<div class="col-sm-3">
									<label class="col-sm-2 control-label no-padding-right">送：</label>
									<div class="clo-sm-1 checkbox">
										<label>
											<input type="checkbox" {{if touristGroupDetail.isNeedLeaveService==1}}checked="checked"{{/if}} class="T-touristSend ace send-check" value="0" name="touristSend">
											<span class="lbl margin-topF5">

											</span>
										</label>
									</div>
									<div class="col-sm-12 T-send-div hide" style="padding-top:25px;">
										<div class="form-group">
											<label class="col-sm-3 control-label no-padding-right">送离日期:</label>
											<div class="col-sm-9">
												<div class="input-group">
													<input type="text" value="{{if touristGroupDetail.isNeedLeaveService==1}}{{if touristGroupDetail.outRemarkArrange != null}}{{touristGroupDetail.outRemarkArrange.leaveTime | dateFormat: 'yyyy-MM-dd'}}{{/if}}{{/if}}" name="sendTime" class="col-sm-12 date-picker datepicker" />
													<span class="input-group-addon">
														<i class="fa fa-calendar"></i>
													</span>
												</div>
											</div>
										</div>
										<div class="form-group">
											<label class="col-sm-3 control-label no-padding-right">地点：</label>
											<div class="col-sm-9">
												<input name="sendAddress" value="{{if touristGroupDetail.isNeedLeaveService==1}}{{if touristGroupDetail.outRemarkArrange != null}}{{touristGroupDetail.outRemarkArrange.leavePosition}}{{/if}}{{/if}}" type="text" class="col-sm-8" />
											</div>
										</div>
										<div class="form-group">
											<label class="col-sm-3 control-label no-padding-right">班次：</label>
											<div class="col-sm-9">
												<input name="leaveShift" type="text" class="col-sm-8" value="{{if touristGroupDetail.isNeedLeaveService==1}}{{if touristGroupDetail.outRemarkArrange != null}}{{touristGroupDetail.outRemarkArrange.leaveShift}}{{/if}}{{/if}}" />
											</div>
										</div>
										<div class="form-group">
											<label class="col-sm-3 control-label no-padding-right">班次时间：</label>
											<div class="col-sm-9">
												<div class="input-group">
													<input name="leaveShiftTime" type="text" class="col-sm-12  date-picker ShiftDatepicker" value="{{if touristGroupDetail.isNeedLeaveService==1}}{{if touristGroupDetail.outRemarkArrange != null}}{{touristGroupDetail.outRemarkArrange.leaveShiftTime}}{{/if}}{{/if}}" />
													<span class="input-group-addon">
															<i class="fa fa-calendar"></i>
													</span>

												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div> 
			</div>
		</div>
		<div class="space-10"></div>
		<button class="btn btn-block btn-primary T-submit-updateTouristGroup guideSubmit" data-entity-id="{{touristGroupDetail.id}}">
			<i class="ace-icon fa fa-check"></i>
			提交信息
		</button>
		<div class="space-20"></div>
	</form>
</div>
